<% layout('/layouts/boilerplate') -%>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
<style>
    /* Fix editor height */
    #editor-container {
        height: 700px;
    }
</style>
<div class="container mx-auto p-5 flex gap-6">
    <!-- ✅ Wrap Everything in Form -->
    <form id="blogForm" action="/blogs" method="POST" class="w-full flex gap-6">
        
        <!-- Left Section: Content Editor -->
        <div class="flex-1 bg-white shadow-lg rounded-lg p-6">
            <input type="text" name="title" placeholder="Add a post title" required 
                class="w-full text-3xl font-bold border border-gray-300 rounded-md p-2 mb-4">

            <!-- Quill Editor -->
            <div id="editor-container" class="border rounded p-3 bg-gray-100 min-h-[400px]"></div>
            <textarea name="content" id="contentInput" hidden></textarea>
        </div>

        <!-- Right Sidebar: Post Settings -->
        <div class="w-[350px] space-y-4">
            <!-- Post Settings Panel -->
            <div class="bg-white shadow-md rounded-lg p-4">
                <h2 class="text-lg font-semibold mb-3">Post Settings</h2>
<!-- Title Tag Input -->
<label class="block text-sm font-medium">Title Tag</label>
<input type="text" name="titleTag" required 
    class="w-full border border-gray-300 rounded-md p-2 mb-3">

<!-- Slug Input -->
<label class="block text-sm font-medium">Slug URL</label>
<input type="text" name="customSlug" required 
    class="w-full border border-gray-300 rounded-md p-2 mb-3">
                <label class="block text-sm font-medium">Meta Description</label>
                <input type="text" name="metaDescription" required 
                    class="w-full border border-gray-300 rounded-md p-2 mb-3">

                <label class="block text-sm font-medium">Header Type</label>
                <select name="headerType" class="w-full border border-gray-300 rounded-md p-2 mb-3">
                    <option value="image">Image</option>
                    <option value="video">Video</option>
                </select>

                <label class="block text-sm font-medium">Upload Cover Image</label>
                <input type="file" name="image" class="w-full border border-gray-300 rounded-md p-2 mb-3">
               
                <label class="block text-sm font-medium">Cover Image URL (Optional)</label>
<input type="text" name="imageLink" class="w-full border border-gray-300 rounded-md p-2 mb-3">

                <label class="block text-sm font-medium">Tags (comma-separated)</label>
                <input type="text" name="tags" class="w-full border border-gray-300 rounded-md p-2 mb-3">
            </div>

             <!-- ✅ SEO Analysis Panel -->
             <div class="bg-white shadow-md rounded-lg p-4">
                <h2 class="text-lg font-semibold mb-3">SEO Analysis</h2>
                <ul class="text-sm space-y-2" id="seo-analysis">
                    <li id="seo-title" class="text-gray-700">Title: <span class="font-semibold text-gray-800"></span></li>
                    <li id="seo-meta" class="text-gray-700">Meta Description: <span class="font-semibold text-gray-800"></span></li>
                    <li id="seo-keywords" class="text-gray-700">Keyword Density: <span class="font-semibold text-gray-800"></span></li>
                    <li id="seo-readability" class="text-gray-700">Readability Score: <span class="font-semibold text-gray-800"></span></li>
                    <li id="seo-links" class="text-gray-700">Links: <span class="font-semibold text-gray-800"></span></li>
                    <li id="seo-images" class="text-gray-700">Images with Alt Text: <span class="font-semibold text-gray-800"></span></li>
                </ul>
            </div>
            

            <!-- Publish & Save Draft Buttons -->
           <div class="bg-white shadow-md rounded-lg p-4">
    <button type="submit" name="status" value="published" id="submitBtn"
        class="bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700 flex items-center justify-center">
        <span id="submitText">Publish Blog</span>
        <span id="loadingSpinner" class="hidden ml-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0116 0h-4a4 4 0 00-8 0H4z"></path>
            </svg>
        </span>
    </button>
    <button type="submit" name="status" value="draft" id="draftBtn"
        class="bg-gray-500 text-white w-full py-2 rounded mt-2 hover:bg-gray-600 flex items-center justify-center">
        <span id="draftText">Save Draft</span>
        <span id="loadingDraftSpinner" class="hidden ml-2">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0116 0h-4a4 4 0 00-8 0H4z"></path>
            </svg>
        </span>
    </button>
</div>
        </div>
    </form>  <!-- ✅ Close the Form Here -->
</div>

<!-- ✅ Load Quill 1.3.6 (Compatible with Image Resize) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@1.3.6/dist/quill.snow.css">
<script src="https://cdn.jsdelivr.net/npm/quill@1.3.6/dist/quill.min.js"></script>

<!-- ✅ Load Quill Image Resize Module -->
<script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js"></script>

<!-- ✅ Load Blog Script -->
<script src="/javascript/blog.js"></script>





